<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Smash Ultimate Material Research</title>

      
      

      <!-- CSS -->
      
      <link rel="stylesheet" href="https://scanmountgoat.github.io/Smush-Material-Research/book.css">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
      

      
      
    </head>

    <body>
        <div class="menu">
            
            
            <nav role="navigation">
                <ul>
                    
                        
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;introduction&#x2F;">
                                    
                                    Introduction
                                </a>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;textures&#x2F;">
                                    
                                    Textures
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;textures&#x2F;col&#x2F;">
                                                    
                                                    Col (Texture0, Texture1)
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;textures&#x2F;prm&#x2F;">
                                                    
                                                    PRM (Texture6)
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;textures&#x2F;nor&#x2F;">
                                                    
                                                    NOR (Texture4)
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;textures&#x2F;emi&#x2F;">
                                                    
                                                    Emi (Texture5, Texture14)
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;textures&#x2F;difcube&#x2F;">
                                                    
                                                    Diffuse Cube (Texture8)
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;textures&#x2F;specularcube&#x2F;">
                                                    
                                                    Specular Cube (Texture7)
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;textures&#x2F;gamma&#x2F;">
                                                    
                                                    Gamma Correction
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;vertex_attributes&#x2F;">
                                    
                                    Vertex Attributes
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;vertex_attributes&#x2F;vertex-attributes&#x2F;">
                                                    
                                                    Vertex Attributes
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;vertex_attributes&#x2F;texturecoordinates&#x2F;">
                                                    
                                                    Texture Coordinates
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;vertex_attributes&#x2F;colorsets&#x2F;">
                                                    
                                                    Color Sets - WIP
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;materials&#x2F;">
                                    
                                    Materials
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;materials&#x2F;material-transitions&#x2F;">
                                                    
                                                    Material Transitions
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;materials&#x2F;transparency&#x2F;">
                                                    
                                                    Transparency
                                                </a>
                                            </li>
                                        
                                            <li class="active">
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;materials&#x2F;skin-materials&#x2F;">
                                                    
                                                    Skin Materials
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;materials&#x2F;hair-materials&#x2F;">
                                                    
                                                    Hair Materials - WIP
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;materials&#x2F;model-brightness&#x2F;">
                                                    
                                                    Model Brightness
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;materials&#x2F;renormal&#x2F;">
                                                    
                                                    Renormal Materials
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;post_processing&#x2F;">
                                    
                                    Post Processing
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;post_processing&#x2F;colorgradinglut&#x2F;">
                                                    
                                                    Color Grading Lut
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;post_processing&#x2F;snapshot&#x2F;">
                                                    
                                                    Snapshot Filters - WIP
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;renders&#x2F;">
                                    
                                    Renders
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;renders&#x2F;albedo-recoloring&#x2F;">
                                                    
                                                    Albedo Recoloring
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                        <a href="https://github.com/ScanMountGoat/Smush-Material-Research"><i class="fa fa-github"></i> GitHub Repository</a>
                    
                </ul>
            </nav>
            
            
        </div>

        <div class="page">
            <div class="page__header">
                <div class="menu-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                
                <span class="search-icon">ðŸ”Ž</span>
                
            </div>

            <div class="page__content">
                
                <div class="search-container">
                    <input id="search" type="search" placeholder="Search..">
                    <div class="search-results">
                        <div class="search-results__header"></div>
                        <ul class="search-results__items"></ul>
                    </div>
                </div>
                
                <div class="book-content">
                    
    <h1>Skin Materials</h1>
    <p>Many fighters have separate materials for approximating the subsurface scattering of skin.
The parameters can also be tweaked for more stylized diffuse shading, such as cel-shading or toon shading.</p>
<style>
    .container {
        display: flex;
        flex-wrap: wrap;
    }
    
    .form-container {
        display: grid;
        grid-template-columns: 175px 50px 1fr;
        grid-auto-rows: 40px;
        row-gap: 10px;
        flex: 2;
    }

    canvas {
        flex: 1;
        width: 300px
    }
</style>
<div class="container">
    <canvas id="imgCanvas"></canvas>
    <form class="form-container">
            <label for="metalness">Metalness</label>
            <input type="text" value="1.0" name="metalness" id="metalnessText">
            <input type="range" value="1.0" min="0.0" max="1.0" step="0.001" name="metalness" id="metalness">
            <label for="albedo">Albedo</label>
            <input type="color" name="albedo" id="albedo" value="#E6DEC7">
            <div></div>
            <label for="customVector11">CustomVector11.rgb</label>
            <input type="color" name="customVector11" id="customVector11" value="#401200">
            <div></div>
            <label for="customVector30x">CustomVector30.x</label>
            <input type="text" value="0.5" name="customVector30x" id="customVector30xText">
            <input type="range" value="0.5" min="0.0" max="1.0" step="0.001" name="customVector30x" id="customVector30x">
            <label for="customVector30y">CustomVector30.y</label>
            <input type="text" value="1.5" name="customVector30y" id="customVector30yText">
            <input type="range" value="1.5" min="0.0" max="30.0" step="0.01" name="customVector30y" id="customVector30y">
    </form>
</div>
<h2 id="blending-intensity">Blending Intensity&nbsp;<a class="anchor" href="#blending-intensity">&#xE732;</a></h2>
<figure class="figure">
    <img src="snake_comparison.jpg" height="auto" width="auto">
    <figcaption class="figure-caption text-center">PRM.r set to 0.0 (left), PRM.r set to 1.0 (center left), Snake's PRM.r mask (center right), PRM.r set to the mask (right)</figcaption>
</figure>
The overall intensity of the effect is controlled by CustomVector30.x, which should have values between 0.0 and 1.0 to avoid artifacts. 
Skin materials always have a metalness of 0. The metalness map stored in the PRM red channel instead acts like a mask for the skin shading effect.
For full effect, both the metalness map and CustomVector30.x should be set to 1.0. 
If either CustomVector30.x or the metalness map are 0.0, the material will use the default diffuse shading.
<pre data-lang="glsl" style="background-color:#eff1f5;color:#4f5b66;" class="language-glsl "><code class="language-glsl" data-lang="glsl"><span style="color:#a7adba;">// CustomVector30.x is the overall intensity.
</span><span style="color:#a7adba;">// Metalness acts like a mask.
</span><span style="color:#b48ead;">float</span><span> sssBlend = CustomVector30.</span><span style="color:#bf616a;">x </span><span>* metalness;
</span></code></pre>
<h2 id="albedo-color">Albedo Color&nbsp;<a class="anchor" href="#albedo-color">&#xE732;</a></h2>
<figure class="figure">
    <img src="ivysaur_albedo.jpg" height="auto" width="auto">
    <figcaption class="figure-caption text-center">Ivysaur's col map (left), CustomVector11.rgb (center), and calculated albedo color (right)</figcaption>
</figure>
The RGB values for CustomVector11 control the subsurface color. This is typically a dark red color to approximate skin. Bright colors will likely cause unwanted bloom. 
The blending intensity is controlled by the PRM red channel and CustomVector30.x as described in the previous section.  
<pre data-lang="glsl" style="background-color:#eff1f5;color:#4f5b66;" class="language-glsl "><code class="language-glsl" data-lang="glsl"><span style="color:#a7adba;">// Blend the col map color with the subsurface color.
</span><span style="color:#b48ead;">vec3</span><span> albedoFinal = </span><span style="color:#96b5b4;">mix</span><span>(col.</span><span style="color:#bf616a;">rgb</span><span>, CustomVector11.</span><span style="color:#bf616a;">rgb</span><span>, sssBlend);
</span></code></pre>
<br>
<figure class="figure">
    <img src="sss_albedo.png" height="auto" width="auto">
    <figcaption class="figure-caption text-center">The GLSL code converted to a node group in Blender's Shader Editor</figcaption>
</figure>
<h3 id="diffuse-shading">Diffuse Shading&nbsp;<a class="anchor" href="#diffuse-shading">&#xE732;</a></h3>
<p>CustomVector30.y is multiplied by the diffuse shading to control the smoothness of the shading.
Using a very high value for the second value of CustomVector30 creates a cel-shaded look because diffuse shading is clamped to 1.0.
A very similar technique is used for Breath of the Wild's shaders, for example.</p>
<pre data-lang="glsl" style="background-color:#eff1f5;color:#4f5b66;" class="language-glsl "><code class="language-glsl" data-lang="glsl"><span style="color:#b48ead;">float</span><span> skinShading = nDotL * CustomVector30.</span><span style="color:#bf616a;">y </span><span>* </span><span style="color:#d08770;">0.5 </span><span>+ </span><span style="color:#d08770;">0.5</span><span>;
</span><span>skinShading = </span><span style="color:#96b5b4;">clamp</span><span>(skinShading, </span><span style="color:#d08770;">0.0</span><span>, </span><span style="color:#d08770;">1.0</span><span>) ;
</span><span style="color:#b48ead;">float</span><span> finalDiffuseShading = </span><span style="color:#96b5b4;">mix</span><span>(nDotL, skinShading, sssBlend);
</span></code></pre>
<p>The third and fourth parameters are unused, despite having values set for some models.</p>

<script type="module" src=https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;javascript&#x2F;skin_materials.js></script>

                </div>
            </div>

            <div class="prev-link">
                
    
        
        
        <a class="previous" href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;materials&#x2F;"><</a>
    

            </div>

            <div class="next-link">
                
    
        <a class="next" href="https:&#x2F;&#x2F;scanmountgoat.github.io&#x2F;Smush-Material-Research&#x2F;materials&#x2F;hair-materials&#x2F;">></a>
    

            </div>
        </div>

        
            
            <script type="text/javascript" src="https://scanmountgoat.github.io/Smush-Material-Research/elasticlunr.min.js"></script>
            <script type="text/javascript" src="https://scanmountgoat.github.io/Smush-Material-Research/search_index.en.js"></script>
            
            <script type="text/javascript" src="https://scanmountgoat.github.io/Smush-Material-Research/book.js"></script>
        
    </body>

</html>
